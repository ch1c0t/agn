// Generated by CoffeeScript 2.5.1
(function() {
  var fs;

  fs = require('fs');

  exports.createPackageFile = function() {
    var ref;
    this.PackageSource = (this.dependencies = (ref = this.api.server) != null ? ref.dependencies : void 0) ? JSON.stringify({name: this.name, dependencies: this.dependencies}) : JSON.stringify({name: this.name});
    return this.createPackageFile = function() {
      var dependencies, file, name;
      file = `${this.dir}/package.json`;
      if (fs.existsSync(file)) {
        ({name, dependencies} = JSON.parse(fs.readFileSync(file, 'utf-8')));
        if ((name === this.name) && (dependencies === this.dependencies)) { // early to not trigger 'npm install' unless necessary
          return;
        }
      }
      return fs.writeFileSync(file, this.PackageSource);
    };
  };

}).call(this);
